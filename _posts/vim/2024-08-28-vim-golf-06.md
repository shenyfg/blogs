---
title: "Vim Golf 06"
date: 2024-08-29
categories: vim
tags: vim tips
---

*关键词：\<C-E>，宏递归*

## 题目

[Copy punctuation](https://www.vimgolf.com/challenges/9v00668dd8a80000000002c1)

Start file

```txt
  #808220    #FF0214    #FFD840    #708230
  #808200    #FF0170    #FFD820    #708210
  #808180    #FF0144    #FFD800    #708190
  #808160    #FF0120    #FFD780    #708170
  #808140    #FF0074    #FFD760    #708150
  #808120    #FF0050    #FFD740    #708130
  #808100    #FF0024    #FFD720    #708110
['#808080', '#FF0000', '#FFD700', '#708090']
```

End file

```txt
  #808220    #FF0214    #FFD840    #708230
  #808200    #FF0170    #FFD820    #708210
  #808180    #FF0144    #FFD800    #708190
  #808160    #FF0120    #FFD780    #708170
  #808140    #FF0074    #FFD760    #708150
  #808120    #FF0050    #FFD740    #708130
  #808100    #FF0024    #FFD720    #708110
['#808080', '#FF0000', '#FFD700', '#708090']
```

## 大神解法

> #6 Danilo J. S. Bellini 🥊🇧🇷 / @danilobellini - Score: 19 - 07/22/24 @ 16:56

```vim
qq/  <CR>2r<C-E>A<C-E><Esc>@qq@qZZ
```

解释：

`<C-E>`: 在插入模式下，`<C-E>`会将下面的字符复制到当前行

`qq/  <CR>2r<C-E>A<C-E><Esc>@qq`:

vim中的宏居然可以递归！

这里意思是首先去搜索两个空格`/`，将这个作为递归出口。
一直到找不到的时候，也即倒数第二行最后两个空格的位置，开始出栈。执行`2r<C-E>`，
将下方的字符复制到当前行。后面的`A<C-E><Esc>`是为了复制末尾的`']`。这个操作每行会执行7次，
直到最开始的空格位置。

太优雅了！
